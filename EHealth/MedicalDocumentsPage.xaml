<ContentPage
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    x:Class="EHealthApp.MedicalDocumentsPage"
    Title="Documente medicale">

	<VerticalStackLayout Spacing="16" Padding="16">

		<!-- Presupun că butonul principal e mov: #9C27B0 (Purple 500) -->
		<Button
            Text="Adaugă document medical"
            Clicked="OnAddMedicalDocumentClicked"
            HorizontalOptions="Fill"
            BackgroundColor="#9C27B0"
            TextColor="White" />

		<Label
            Text="Categorii:"
            FontAttributes="Bold"
            FontSize="16" />

		<CollectionView
            x:Name="CategoriesCollectionView"
            ItemsSource="{Binding Categories}"
            SelectionMode="Single"
            SelectedItem="{Binding SelectedCategory, Mode=TwoWay}"
            HeightRequest="60"
            BackgroundColor="Transparent"
            Margin="0,0,0,12">
			<CollectionView.ItemsLayout>
				<LinearItemsLayout Orientation="Horizontal"/>
			</CollectionView.ItemsLayout>
			<CollectionView.ItemTemplate>
				<DataTemplate>
					<Frame
                        Padding="18,8"
                        Margin="8,0"
                        CornerRadius="18"
                        HasShadow="True"
                        VerticalOptions="Center"
                        HorizontalOptions="Center">
						<VisualStateManager.VisualStateGroups>
							<VisualStateGroupList>
								<VisualStateGroup Name="CommonStates">
									<VisualState Name="Normal">
										<VisualState.Setters>
											<Setter Property="BackgroundColor" Value="#9C27B0"/>
											<Setter Property="BorderColor" Value="#7B1FA2"/>
										</VisualState.Setters>
									</VisualState>
									<VisualState Name="Selected">
										<VisualState.Setters>
											<Setter Property="BackgroundColor" Value="#7B1FA2"/>
											<Setter Property="BorderColor" Value="#4A0072"/>
										</VisualState.Setters>
									</VisualState>
								</VisualStateGroup>
							</VisualStateGroupList>
						</VisualStateManager.VisualStateGroups>
						<Label Text="{Binding Name}"
                               FontAttributes="Bold"
                               FontSize="16"
                               TextColor="White"
                               VerticalOptions="Center"
                               HorizontalOptions="Center"/>
					</Frame>
				</DataTemplate>
			</CollectionView.ItemTemplate>
		</CollectionView>

		<Label
            Text="Documente:"
            FontAttributes="Bold"
            FontSize="16"
            Margin="0,0,0,4"/>

		<CollectionView
            x:Name="DocumentsCollectionView"
            ItemsSource="{Binding FilteredDocuments}">
			<CollectionView.ItemTemplate>
				<DataTemplate>
					<Frame Margin="0,2" Padding="8,6" CornerRadius="10" BorderColor="#E0E0E0">
						<Grid>
							<Grid.ColumnDefinitions>
								<ColumnDefinition Width="*" />
								<ColumnDefinition Width="Auto" />
								<ColumnDefinition Width="Auto" />
							</Grid.ColumnDefinitions>
							<Label Text="{Binding FileName}" VerticalOptions="Center"/>
							<Button Grid.Column="1" Text="Share" Clicked="OnShareClicked" CommandParameter="{Binding FilePath}" Padding="0,0,8,0"/>
							<Button Grid.Column="2" Text="Descarcă" Clicked="OnDownloadClicked" CommandParameter="{Binding FilePath}" Padding="0"/>
						</Grid>
					</Frame>
				</DataTemplate>
			</CollectionView.ItemTemplate>
			<CollectionView.EmptyView>
				<Label Text="Nu există documente în această categorie."
                       FontAttributes="Italic"
                       TextColor="Gray"
                       Padding="12"/>
			</CollectionView.EmptyView>
		</CollectionView>

	</VerticalStackLayout>
</ContentPage>